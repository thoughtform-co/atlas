/* ═══════════════════════════════════════════════════════════════
   CELESTIAL CONSTELLATION MOCKUP - CSS MODULE
   
   3D card wrapper with actual depth (edge faces) around EntityCard
   Semi-transparent futuristic tablet effect
   ═══════════════════════════════════════════════════════════════ */

.container {
  position: fixed;
  inset: 0;
  background: var(--void, #050403);
  overflow: hidden;
  cursor: grab;
}

.container:active {
  cursor: grabbing;
}

/* ─── CANVAS ─── */
.canvas {
  position: fixed;
  inset: 0;
  z-index: 1; /* Cards are z-index 5-50, popup is 100+ */
  /* Crisp pixel rendering - no smoothing/blur */
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

/* ─── 3D CARD WRAPPER ─── */
.cardWrapper {
  position: absolute;
  pointer-events: auto;
  /* z-index is set dynamically based on depth, kept low (< 50) */
  transform: translate(-50%, -50%);
  /* Perspective for 3D effect */
  perspective: 1200px;
  perspective-origin: center center;
  transition: opacity 0.3s ease, transform 0.5s cubic-bezier(0.19, 1, 0.22, 1);
  --glow-color: rgba(202, 165, 84, 0.6);
  --card-depth: 6px;
}

/* Glow effect - luminescent multi-layer glow */
.cardWrapper::before {
  content: '';
  position: absolute;
  inset: calc(-1 * var(--glow-spread, 30px));
  background: radial-gradient(
    ellipse 60% 60% at 50% 50%,
    var(--glow-color) 0%,
    rgba(255, 255, 255, 0.1) 20%,
    transparent 70%
  );
  opacity: var(--glow-opacity, 0.3);
  filter: blur(8px);
  pointer-events: none;
  z-index: -1;
}

/* Second glow layer for more luminescence */
.cardWrapper::after {
  content: '';
  position: absolute;
  inset: calc(-0.5 * var(--glow-spread, 30px));
  background: radial-gradient(
    ellipse 50% 50% at 50% 50%,
    var(--glow-color) 0%,
    transparent 60%
  );
  opacity: calc(var(--glow-opacity, 0.3) * 0.7);
  filter: blur(4px);
  pointer-events: none;
  z-index: -1;
}

/* ─── 3D CARD STRUCTURE ─── */
.card3d {
  position: relative;
  width: 160px;  /* Slightly smaller */
  height: 213px;
  transform-style: preserve-3d;
  transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1);
}

/* ─── FRONT FACE ─── */
.cardFront {
  position: absolute;
  width: 100%;
  height: 100%;
  /* VISIBLE from both sides - transparent tablet effect */
  backface-visibility: visible;
  -webkit-backface-visibility: visible;
  transform: translateZ(calc(var(--card-depth) / 2));
  /* Semi-transparent glass effect */
  opacity: 0.92;
  /* Glowing border */
  box-shadow: 
    0 0 12px var(--glow-color),
    0 0 25px rgba(202, 165, 84, 0.08);
  overflow: hidden;
}

/* Scale down the EntityCard to fit smaller container */
.cardFront :global(.entity-card) {
  position: relative !important;
  transform: scale(0.8) !important;
  transform-origin: top left !important;
}

/* Wrapper to contain scaled card */
.cardFront :global(.entity-card > div) {
  width: 200px;
  height: 266px;
}

/* ─── EDGE FACES (actual 3D depth) ─── */
.cardEdge {
  position: absolute;
  /* Semi-transparent glass edge */
  background: linear-gradient(
    180deg,
    var(--glow-color) 0%,
    rgba(40, 38, 35, 0.5) 10%,
    rgba(30, 28, 25, 0.3) 50%,
    rgba(40, 38, 35, 0.5) 90%,
    var(--glow-color) 100%
  );
  border: 1px solid rgba(202, 165, 84, 0.25);
}

/* Right edge */
.cardEdgeRight {
  width: var(--card-depth);
  height: 100%;
  top: 0;
  left: 100%;
  transform-origin: 0% 50%;
  transform: rotateY(90deg);
}

/* Left edge */
.cardEdgeLeft {
  width: var(--card-depth);
  height: 100%;
  top: 0;
  right: 100%;
  transform-origin: 100% 50%;
  transform: rotateY(-90deg);
}

/* ─── LOADING STATE ─── */
.loading {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: var(--font-mono);
  font-size: 12px;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--dawn-50, rgba(236, 227, 214, 0.5));
  z-index: 100;
}

/* ─── MOCKUP LABEL ─── */
.mockupLabel {
  position: fixed;
  top: 20px;
  left: 64px;
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--gold, #CAA554);
  z-index: 100;
}

/* ─── SETTINGS PANEL ─── */
.settingsButton {
  position: fixed;
  bottom: 80px;
  right: calc(48px + clamp(32px, 5vw, 64px));
  width: 36px;
  height: 36px;
  background: rgba(20, 18, 15, 0.8);
  border: 1px solid rgba(202, 165, 84, 0.3);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 90;
  transition: all 0.2s ease;
  color: var(--dawn-50, rgba(236, 227, 214, 0.5));
}

.settingsButton:hover {
  background: rgba(30, 28, 25, 0.9);
  border-color: var(--gold, #CAA554);
  color: var(--gold, #CAA554);
}

.settingsButton.active {
  background: rgba(202, 165, 84, 0.15);
  border-color: var(--gold, #CAA554);
  color: var(--gold, #CAA554);
}

.settingsPanel {
  position: fixed;
  bottom: 130px;
  right: calc(48px + clamp(32px, 5vw, 64px));
  width: 280px;
  background: rgba(12, 11, 10, 0.95);
  border: 1px solid rgba(202, 165, 84, 0.25);
  border-radius: 4px;
  padding: 16px;
  z-index: 90;
  backdrop-filter: blur(12px);
  max-height: 60vh;
  overflow-y: auto;
}

.settingsPanel::-webkit-scrollbar {
  width: 4px;
}

.settingsPanel::-webkit-scrollbar-track {
  background: transparent;
}

.settingsPanel::-webkit-scrollbar-thumb {
  background: rgba(202, 165, 84, 0.3);
  border-radius: 2px;
}

.settingsTitle {
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--gold, #CAA554);
  margin-bottom: 16px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(202, 165, 84, 0.15);
}

.settingsSection {
  margin-bottom: 16px;
}

.settingsSectionTitle {
  font-family: var(--font-mono);
  font-size: 9px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: rgba(236, 227, 214, 0.4);
  margin-bottom: 10px;
}

.settingsRow {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 12px;
}

.settingsLabel {
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 0.08em;
  color: rgba(236, 227, 214, 0.7);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.settingsValue {
  color: var(--gold, #CAA554);
  font-weight: 500;
}

.settingsSlider {
  width: 100%;
  height: 4px;
  -webkit-appearance: none;
  appearance: none;
  background: rgba(236, 227, 214, 0.1);
  border-radius: 2px;
  outline: none;
  cursor: pointer;
}

.settingsSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 12px;
  height: 12px;
  background: var(--gold, #CAA554);
  border-radius: 50%;
  cursor: pointer;
  transition: transform 0.15s ease;
}

.settingsSlider::-webkit-slider-thumb:hover {
  transform: scale(1.2);
}

.settingsSlider::-moz-range-thumb {
  width: 12px;
  height: 12px;
  background: var(--gold, #CAA554);
  border-radius: 50%;
  cursor: pointer;
  border: none;
}

/* ─── SELECT DROPDOWN ─── */
.settingsSelect {
  width: 100%;
  padding: 8px 12px;
  background: rgba(20, 18, 15, 0.9);
  border: 1px solid rgba(202, 165, 84, 0.3);
  border-radius: 3px;
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 0.08em;
  color: var(--gold, #CAA554);
  cursor: pointer;
  transition: all 0.2s ease;
  outline: none;
  -webkit-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23CAA554' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  padding-right: 30px;
}

.settingsSelect:hover {
  border-color: var(--gold, #CAA554);
  background-color: rgba(30, 28, 25, 0.95);
}

.settingsSelect:focus {
  border-color: var(--gold, #CAA554);
  box-shadow: 0 0 8px rgba(202, 165, 84, 0.2);
}

.settingsSelect option {
  background: rgb(20, 18, 15);
  color: rgba(236, 227, 214, 0.9);
  padding: 8px;
}

.resetButton {
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: 1px solid rgba(202, 165, 84, 0.3);
  border-radius: 3px;
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: rgba(236, 227, 214, 0.6);
  cursor: pointer;
  transition: all 0.2s ease;
  margin-top: 8px;
}

.resetButton:hover {
  background: rgba(202, 165, 84, 0.1);
  border-color: var(--gold, #CAA554);
  color: var(--gold, #CAA554);
}
