# Atlas Project Rules

Platform: **Atlas** (dark mode bestiary)
Design System: `thoughtform://` via MCP server

## Context7 Documentation

When working with libraries or answering questions about APIs, use Context7 to fetch up-to-date documentation instead of relying on training data.

### Auto-Invoke Context7 For:
- Next.js App Router, Server Components, Server Actions
- React 19 hooks (use, useOptimistic, useFormStatus)
- Supabase authentication, realtime, RLS policies
- Anthropic/Claude SDK patterns
- Google Generative AI / Gemini
- Any library where the user asks "how do I..." or "what's the latest way to..."

### How to Use Context7:
```powershell
# From project root - use the helper script
.\.claude\skills\context7\fetch-docs.ps1 "vercel/next.js" 5000
.\.claude\skills\context7\fetch-docs.ps1 "supabase/supabase-js" 5000
```

### Atlas Stack Library IDs:
- Next.js: `vercel/next.js`
- React: `facebook/react`
- Supabase: `supabase/supabase-js`
- Anthropic SDK: `anthropics/anthropic-sdk-typescript`
- Google GenAI: `google/generative-ai`
- Tailwind: `tailwindlabs/tailwindcss`

### Key Files:
- `.claude/skills/context7/SKILL.md` - Context7 skill details
- `.claude/skills/context7/LIBRARIES.md` - Library ID reference

## Design System

Use the Thoughtform design system for all UI work:
- Background: Void `#050403`
- Accent: Gold `#CAA554`
- Text: Dawn `#ECE3D6`
- Fonts: PT Mono (headings), IBM Plex Sans (body)
- Zero border-radius everywhere
- GRID=3 for particles

Atlas-specific:
- Entity cards: 4:5 aspect ratio, 620px width
- Six parameter visualizations per card
- Threat levels: benign `#5B8A7A`, cautious `#7A7868`, volatile `#C17F59`, existential `#8B5A5A`

Full tokens: See `.thoughtform-brandworld/tokens/platforms/atlas.json`

## Development Guidelines

Follow the principles documented in `.sentinel.md` for:
- State management in SSR/Client environments
- useEffect dependencies and avoiding stale closures
- Async operations and null check narrowing
- Component patterns and conditional rendering
- Media type handling and fallback chains
- CSS cross-browser support

## Linear Issue Creation

When asked to create a Linear issue, follow the template in `.linear-issues/ISSUE_TEMPLATE.md`:

```
## Problem
[Clear description of what's wrong or missing]

## Root Causes
[Technical root causes or why this is needed]

## Solution
[Detailed explanation of the solution]

## Files Changed
[Key files modified]

## Testing
[What was tested and how]

## Branch
[Git branch name]

## Commits
[Commit messages or PR reference]

## Product Learning
[Key insight gained from solving this issue - what principle was learned]
```

Reference existing issues in `.linear-issues/` for formatting examples:
- `ATL-001-spacing-fix.md`
- `ATL-003-fix-role-resolution-storm.md`
- `ATL-004-full-bleed-media-glassmorphism.md`
- `example-formatted-issue.md`

## Code Style

- Use TypeScript strict mode
- Prefer named exports over default exports
- Use CSS modules for component-specific styles
- Follow existing patterns in the codebase before creating new abstractions
